<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QuickCompress - Professional Image Compression Tool</title>
  <meta name="description" content="Professional image compression tool with advanced algorithms. Reduce file sizes while maintaining quality. Fast, secure, and free.">
  <meta name="keywords" content="image compression, optimize images, reduce image size, professional tool, web compression">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EüìÅ%3C/text%3E%3C/svg%3E">
  <style>
    /* Letter Glitch Background */
    .glitch-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: #000000;
      overflow: hidden;
      /* Noise effect instead of blur */
      background-image: 
        radial-gradient(circle at 20% 50%, transparent 20%, rgba(255,255,255,0.3) 21%, rgba(255,255,255,0.3) 34%, transparent 35%, transparent),
        linear-gradient(0deg, rgba(255,255,255,0.1) 50%, transparent 50%);
      background-size: 3px 3px, 2px 2px;
      animation: noise 0.2s infinite;
    }
    
    @keyframes noise {
      0%, 100% { transform: translate(0, 0); }
      10% { transform: translate(-1px, -1px); }
      20% { transform: translate(1px, -1px); }
      30% { transform: translate(-1px, 1px); }
      40% { transform: translate(1px, 1px); }
      50% { transform: translate(-1px, 0); }
      60% { transform: translate(1px, 0); }
      70% { transform: translate(0, -1px); }
      80% { transform: translate(0, 1px); }
      90% { transform: translate(-1px, -1px); }
    }
    
    .glitch-canvas {
      display: block;
      width: 100%;
      height: 100%;
      /* Add noise texture overlay */
      position: relative;
    }
    
    .glitch-canvas::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      background-image: 
        radial-gradient(circle at 25% 25%, rgba(255,255,255,0.1) 1px, transparent 1px),
        radial-gradient(circle at 75% 75%, rgba(0,0,0,0.1) 1px, transparent 1px);
      background-size: 4px 4px, 6px 6px;
      background-position: 0 0, 2px 2px;
      opacity: 0.6;
      animation: staticNoise 0.16s infinite steps(8);
    }
    
    @keyframes staticNoise {
      0% { transform: translateX(0px) translateY(0px); }
      25% { transform: translateX(1px) translateY(-1px); }
      50% { transform: translateX(-1px) translateY(1px); }
      75% { transform: translateX(1px) translateY(1px); }
      100% { transform: translateX(-1px) translateY(-1px); }
    }
    
    .center-vignette {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background: 
        radial-gradient(circle, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.2) 60%, rgba(0,0,0,0) 100%),
        /* Film grain noise overlay */
        repeating-linear-gradient(
          90deg,
          transparent,
          transparent 2px,
          rgba(255,255,255,0.03) 2px,
          rgba(255,255,255,0.03) 4px
        ),
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 2px,
          rgba(0,0,0,0.1) 2px,
          rgba(0,0,0,0.1) 4px
        );
      /* Remove backdrop-filter blur */
      animation: grainNoise 0.1s infinite alternate;
    }
    
    @keyframes grainNoise {
      0% { opacity: 0.8; }
      100% { opacity: 1; }
    }
    body {
      background: #000000; /* Fallback background */
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      position: relative;
      padding: 20px;
      overflow-x: hidden;
      scroll-behavior: smooth;
    }
    
    * {
      box-sizing: border-box;
    }
    
    ::selection {
      background: rgba(97, 220, 163, 0.3);
      color: #ffffff;
    }

    .site-name {
      position: fixed;
      top: 24px;
      left: 24px;
      font-size: 18px;
      font-weight: 600;
      color: #61dca3;
      text-shadow: 0 0 20px rgba(97, 220, 163, 0.6);
      z-index: 1000;
      
      /* Enhanced glass effect */
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(97, 220, 163, 0.4);
      border-radius: 16px;
      padding: 14px 24px;
      box-shadow: 
        0 12px 40px rgba(0, 0, 0, 0.4),
        0 0 30px rgba(97, 220, 163, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        inset 0 -1px 0 rgba(0, 0, 0, 0.2);
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      
      cursor: pointer;
      user-select: none;
      position: relative;
      overflow: hidden;
    }
    
    .site-name::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(97, 220, 163, 0.2), transparent);
      transition: left 0.6s;
    }
    
    .site-name:hover::before {
      left: 100%;
    }
    
    .site-name:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 
        0 16px 50px rgba(0, 0, 0, 0.5),
        0 0 40px rgba(97, 220, 163, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2),
        inset 0 -1px 0 rgba(0, 0, 0, 0.3);
      border-color: rgba(97, 220, 163, 0.6);
      background: rgba(0, 0, 0, 0.9);
      text-shadow: 0 0 25px rgba(97, 220, 163, 0.8);
    }
    
    .upload-container {
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
      border: 1px solid rgba(97, 220, 163, 0.3);
      padding: 48px;
      border-radius: 24px;
      box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.6),
        0 0 40px rgba(97, 220, 163, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      text-align: center;
      width: 90%;
      max-width: 1200px;
      margin-top: 120px;
      position: relative;
      z-index: 5;
      transition: all 0.3s ease;
    }
    
    /* Desktop Split Layout */
    @media (min-width: 1024px) {
      .upload-container {
        display: flex;
        gap: 24px;
        align-items: stretch;
        text-align: left;
        padding: 32px;
        min-height: 720px;
        height: 720px;
        overflow: hidden;
      }
      
      .left-panel {
        flex: 0 0 42%;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: stretch;
        padding: 20px;
        min-height: 100%;
        height: 100%;
        gap: 8px;
        overflow: visible;
        position: relative;
      }
      
      .right-panel {
        flex: 1;
        display: flex;
        flex-direction: column;
        height: 100%;
        min-height: 100%;
        overflow: hidden;
        position: relative;
      }
      
      .quality-section {
        margin: 0;
        flex-shrink: 0;
        position: relative;
        z-index: 10;
        padding: 12px;
        min-height: 75px;
        gap: 8px;
      }
      
      .quality-presets {
        gap: 4px;
      }
      
      .preset-btn {
        padding: 4px 8px;
        font-size: 0.8rem;
        min-width: 60px;
      }
      
      .upload-title {
        flex-shrink: 0;
        margin-bottom: 4px;
        font-size: 1.4rem;
      }
      
      .icon-btns {
        flex-shrink: 0;
        margin: 4px 0 8px 0;
        gap: 16px;
      }
      
      .icon-btn {
        width: 60px;
        height: 60px;
      }
      
      .file-stats {
        margin-top: 8px;
        flex-grow: 1;
        margin-bottom: auto;
      }
    }
    
    /* Mobile Layout */
    @media (max-width: 1023px) {
      .upload-container {
        flex-direction: column;
        text-align: center;
      }
      
      .left-panel,
      .right-panel {
        width: 100%;
      }
    }
    
    .upload-container:hover {
      transform: translateY(-2px);
      box-shadow: 
        0 25px 70px rgba(0, 0, 0, 0.7),
        0 0 50px rgba(97, 220, 163, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
    }
    
    @media (max-width: 768px) {
      .upload-container {
        padding: 32px 24px;
        margin: 100px 16px 0 16px;
        width: calc(100% - 32px);
        max-width: none;
      }
      
      .site-name {
        top: 16px;
        left: 16px;
        font-size: 16px;
        padding: 12px 20px;
      }
    }

    .upload-title {
      color: #61dca3;
      margin-bottom: 24px;
      text-shadow: 0 0 20px rgba(97, 220, 163, 0.4);
      font-weight: 600;
      font-size: 1.8rem;
      letter-spacing: -0.01em;
    }
    
    /* Desktop Title Styling */
    @media (min-width: 1024px) {
      .upload-title {
        text-align: center;
        font-size: 1.4rem;
        margin-bottom: 16px;
        width: 100%;
      }
    }
    
    /* Mobile Title Styling */
    @media (max-width: 1023px) {
      .upload-title {
        text-align: center;
      }
    }

    /* Enhanced Icon Buttons */
    .icon-btns {
      display: flex;
      justify-content: center;
      gap: 18px;
      margin: 8px 0;
      padding: 6px 0;
      overflow: visible;
      flex-wrap: wrap;
    }
    
    /* Desktop Icon Layout */
    @media (min-width: 1024px) {
      .icon-btns {
        justify-content: center;
        margin: 4px 0 20px 0;
        gap: 16px;
        width: 100%;
      }
    }
    
    /* Mobile Icon Layout */
    @media (max-width: 1023px) {
      .icon-btns {
        justify-content: center;
      }
    }

    .icon-btn {
      background-color: transparent;
      border: none;
      outline: none;
      position: relative;
      width: 70px;
      height: 70px;
      perspective: 1000px;
      transform-style: preserve-3d;
      -webkit-tap-highlight-color: transparent;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .icon-btn__back,
    .icon-btn__front,
    .icon-btn__label {
      transition:
        opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94),
        transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .icon-btn__back,
    .icon-btn__front {
      border-radius: 20px;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .icon-btn__back {
      box-shadow: 
        0 8px 25px rgba(0, 0, 0, 0.3),
        0 0 20px rgba(97, 220, 163, 0.1);
      display: block;
      transform: rotate(8deg);
      transform-origin: 100% 100%;
      opacity: 0.8;
    }

    .icon-btn__front {
      background: rgba(255, 255, 255, 0.12);
      box-shadow: 
        0 0 0 1px rgba(255, 255, 255, 0.2) inset,
        0 4px 20px rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      display: flex;
      transform-origin: 50% 50%;
      border: 1px solid rgba(97, 220, 163, 0.3);
    }

    .icon-btn__icon {
      margin: auto;
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      color: white;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }

    .icon-btn__label {
      font-size: 12px;
      font-weight: 500;
      white-space: nowrap;
      text-align: center;
      line-height: 1.2;
      color: #61dca3;
      opacity: 0;
      position: absolute;
      top: 100%;
      right: 0;
      left: 0;
      transform: translateY(8px);
      margin-top: 10px;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
    }

    .icon-btn:focus-visible .icon-btn__back,
    .icon-btn:hover .icon-btn__back {
      transform: rotate(15deg) translate3d(-8px, -8px, 12px);
      opacity: 1;
      box-shadow: 
        0 12px 35px rgba(0, 0, 0, 0.4),
        0 0 30px rgba(97, 220, 163, 0.2);
    }

    .icon-btn:focus-visible .icon-btn__front,
    .icon-btn:hover .icon-btn__front {
      transform: translateZ(20px) scale(1.05);
      background: rgba(255, 255, 255, 0.18);
      border-color: rgba(97, 220, 163, 0.5);
      box-shadow: 
        0 0 0 1px rgba(255, 255, 255, 0.3) inset,
        0 8px 30px rgba(0, 0, 0, 0.3),
        0 0 20px rgba(97, 220, 163, 0.3);
    }

    .icon-btn:focus-visible .icon-btn__label,
    .icon-btn:hover .icon-btn__label {
      opacity: 1;
      transform: translateY(0);
      color: #ffffff;
    }

    .download-btn {
      display: none;
    }
    
    .icon-btn:active {
      transform: scale(0.95);
    }

    .drop-area {
      border: 2px dashed rgba(97, 220, 163, 0.4);
      border-radius: 20px;
      padding: 48px 32px;
      margin: 32px 0;
      color: rgba(255, 255, 255, 0.8);
      background: rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      min-height: 300px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
    
    /* Desktop Drop Area - Responsive Size */
    @media (min-width: 1024px) {
      .drop-area {
        min-height: 100%;
        height: 100%;
        margin: 0;
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        position: relative;
      }
      
      .drop-area.has-image {
        padding: 0;
        background: transparent;
        border: 2px solid rgba(97, 220, 163, 0.3);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        cursor: default !important;
        overflow: hidden;
      }
      
      .drop-area.has-image .drop-area-text,
      .drop-area.has-image .drop-area-subtext {
        display: none;
      }
    }
    
    /* Mobile Drop Area - Fixed Size */
    @media (max-width: 1023px) {
      .drop-area {
        min-height: 300px;
        max-height: 300px;
        height: 300px;
        margin: 24px 0;
      }
      
      .drop-area.has-image {
        padding: 0;
        border: 2px solid rgba(97, 220, 163, 0.3);
        cursor: default !important;
      }
    }
    
    .drop-area::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(97, 220, 163, 0.1), rgba(97, 179, 220, 0.1));
      opacity: 0;
      transition: opacity 0.4s ease;
      pointer-events: none;
    }
    
    .drop-area:hover::before {
      opacity: 1;
    }
    
    .drop-area:hover {
      border-color: rgba(97, 220, 163, 0.7);
      box-shadow: 
        0 0 30px rgba(97, 220, 163, 0.2),
        inset 0 0 20px rgba(97, 220, 163, 0.05);
      color: #ffffff;
      transform: translateY(-2px);
    }
    
    .drop-area.dragover {
      border-color: rgba(97, 220, 163, 1);
      background: rgba(97, 220, 163, 0.1);
      box-shadow: 
        0 0 40px rgba(97, 220, 163, 0.4),
        inset 0 0 30px rgba(97, 220, 163, 0.1);
      transform: scale(1.02);
    }
    
    .drop-area-text {
      font-size: 1.2rem;
      font-weight: 500;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .drop-area-subtext {
      font-size: 0.95rem;
      opacity: 0.7;
      margin-bottom: 24px;
    }
    
    @media (max-width: 768px) {
      .drop-area {
        padding: 32px 24px;
        min-height: 160px;
      }
      
      .drop-area-text {
        font-size: 1.1rem;
      }
    }

    .preview {
      margin-top: 24px;
      width: 100%;
      height: 100%;
      position: relative;
      overflow: hidden;
      border-radius: 16px;
    }
    
    /* Image Zoom Container */
    .image-zoom-container {
      width: 100%;
      height: 100%;
      position: relative;
      overflow: hidden;
      cursor: grab;
      border-radius: 16px;
    }
    
    .image-zoom-container:active {
      cursor: grabbing;
    }
    
    .image-zoom-container img {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition: transform 0.2s ease;
      max-width: none;
      max-height: none;
      object-fit: none;
      border: 1px solid rgba(97, 220, 163, 0.3);
      border-radius: 12px;
      box-shadow: 
        0 8px 25px rgba(0, 0, 0, 0.4),
        0 0 20px rgba(97, 220, 163, 0.1);
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }
    
    /* Zoom Controls */
    .zoom-controls {
      position: absolute;
      top: 12px;
      right: 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      z-index: 10;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .image-zoom-container:hover .zoom-controls {
      opacity: 1;
    }
    
    .zoom-btn {
      width: 36px;
      height: 36px;
      background: rgba(0, 0, 0, 0.7);
      border: 1px solid rgba(97, 220, 163, 0.4);
      border-radius: 8px;
      color: white;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    
    .zoom-btn:hover {
      background: rgba(97, 220, 163, 0.3);
      border-color: rgba(97, 220, 163, 0.7);
      transform: scale(1.1);
    }
    
    /* Reset/Fit Button */
    .zoom-reset {
      width: 36px;
      height: 36px;
      background: rgba(0, 0, 0, 0.7);
      border: 1px solid rgba(97, 220, 163, 0.4);
      border-radius: 8px;
      color: white;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    
    .zoom-reset:hover {
      background: rgba(97, 220, 163, 0.3);
      border-color: rgba(97, 220, 163, 0.7);
      transform: scale(1.1);
    }
    
    /* Fallback for non-zoom images */
    .preview img:not(.zoom-image) {
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
      object-fit: contain;
      border: 1px solid rgba(97, 220, 163, 0.3);
      border-radius: 16px;
      margin: 16px 0;
      box-shadow: 
        0 8px 25px rgba(0, 0, 0, 0.4),
        0 0 20px rgba(97, 220, 163, 0.1);
      transition: all 0.3s ease;
      display: block;
    }
    
    /* Desktop Preview Sizing - Fixed Container */
    @media (min-width: 1024px) {
      .preview {
        margin-top: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        width: 100%;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        overflow: hidden;
        z-index: 1;
      }
    }
    
    /* Mobile Preview Sizing - Fixed Container */
    @media (max-width: 1023px) {
      .preview {
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        margin-top: 0;
      }
      
      .preview img:not(.zoom-image) {
        max-height: 250px;
        max-width: 100%;
        margin: 8px 0;
      }
    }
    
    .preview-stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-top: 20px;
    }
    
    .stat-card {
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(97, 220, 163, 0.2);
      border-radius: 12px;
      padding: 16px;
      text-align: center;
    }
    
    .stat-label {
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 4px;
      font-weight: 500;
    }
    
    .stat-value {
      font-size: 1.2rem;
      color: #61dca3;
      font-weight: 600;
      font-family: 'JetBrains Mono', monospace;
    }
    
    /* Real-time Quality Preview */
    .quality-preview {
      margin-top: 12px;
      padding: 12px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
      border: 1px solid rgba(97, 220, 163, 0.2);
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.8);
      text-align: center;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    /* File Stats Section */
    .file-stats {
      margin-top: 8px;
      padding: 16px;
      background: rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(97, 220, 163, 0.15);
      border-radius: 12px;
      box-shadow: 
        0 2px 10px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
      width: 100%;
      min-height: 70px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      flex-grow: 1;
    }
    
    .stats-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 12px;
      text-align: center;
      align-items: center;
      justify-content: center;
      width: 100%;
      max-width: 400px;
      margin: 0 auto 12px auto;
    }
    
    .file-stats .stat-item {
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 8px;
    }
    
    .file-stats .stat-label {
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 4px;
      font-weight: 500;
      text-align: center;
      width: 100%;
    }
    
    .file-stats .stat-value {
      font-size: 1.1rem;
      color: #61dca3;
      font-weight: 600;
      font-family: 'JetBrains Mono', monospace;
      text-align: center;
      width: 100%;
    }
    
    @media (max-width: 768px) {
      .stats-container {
        grid-template-columns: 1fr;
        gap: 16px;
      }
    }
    
    @media (max-width: 480px) {
      .preview-stats {
        grid-template-columns: 1fr;
        gap: 6px;
      }
    }

    .quality-section {
      margin: 8px 0;
      padding: 16px;
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border: 1px solid rgba(97, 220, 163, 0.2);
      border-radius: 16px;
      box-shadow: 
        0 4px 15px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      width: 100%;
      min-height: 90px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: stretch;
      gap: 10px;
      position: relative;
      overflow: visible;
    }
    
    .quality-label {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 0;
      color: #ffffff;
      font-weight: 500;
      font-size: 0.95rem;
      text-align: center;
      width: 100%;
      padding: 0 4px;
    }
    
    .quality-value {
      color: #61dca3;
      font-family: 'JetBrains Mono', monospace;
      font-weight: 600;
      font-size: 1.2rem;
    }
    
    .slider-container {
      position: relative;
      width: 100%;
      padding: 6px 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      outline: none;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, #61dca3, #61b3dc);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 
        0 4px 12px rgba(97, 220, 163, 0.4),
        0 0 20px rgba(97, 220, 163, 0.2);
      transition: all 0.3s ease;
    }
    
    input[type="range"]::-webkit-slider-thumb:hover {
      transform: scale(1.2);
      box-shadow: 
        0 6px 20px rgba(97, 220, 163, 0.6),
        0 0 30px rgba(97, 220, 163, 0.4);
    }
    
    input[type="range"]::-moz-range-thumb {
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, #61dca3, #61b3dc);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 
        0 4px 12px rgba(97, 220, 163, 0.4),
        0 0 20px rgba(97, 220, 163, 0.2);
      transition: all 0.3s ease;
    }
    
    .quality-presets {
      display: flex;
      gap: 8px;
      margin-top: 0;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      width: 100%;
      padding: 0 4px;
    }
    
    .preset-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(97, 220, 163, 0.3);
      color: rgba(255, 255, 255, 0.8);
      padding: 10px 18px;
      border-radius: 22px;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      white-space: nowrap;
      min-width: 80px;
    }
    
    .preset-btn:hover,
    .preset-btn.active {
      background: rgba(97, 220, 163, 0.2);
      border-color: rgba(97, 220, 163, 0.6);
      color: #ffffff;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(97, 220, 163, 0.3);
    }

    .description-box {
      text-align: center;
      max-width: 500px;
      margin: 48px auto;
      padding: 24px;
      color: rgba(255, 255, 255, 0.9);
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(97, 220, 163, 0.3);
      border-radius: 16px;
      box-shadow: 
        0 8px 30px rgba(0, 0, 0, 0.6),
        0 0 25px rgba(97, 220, 163, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      position: relative;
      z-index: 5;
    }
    
    .simple-stats {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin-bottom: 24px;
      flex-wrap: wrap;
      gap: 16px;
    }
    
    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      flex: 1;
      min-width: 120px;
    }
    
    .stat-number {
      font-size: 2rem;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }
    
    .stat-text {
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.8);
      font-weight: 500;
      text-align: center;
    }
    
    .tip-box {
      background: linear-gradient(135deg, rgba(97, 220, 163, 0.15), rgba(97, 179, 220, 0.15));
      border: 1px solid rgba(97, 220, 163, 0.4);
      padding: 16px;
      border-radius: 12px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 0.95rem;
    }
    
    .tip-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, #61dca3, #61b3dc);
    }
    
    .tip-icon {
      font-size: 1.1rem;
    }
    
    @media (max-width: 480px) {
      .simple-stats {
        flex-direction: column;
        gap: 20px;
      }
      
      .stat-item {
        min-width: auto;
      }
      
      .description-box {
        margin: 32px 16px;
        padding: 20px;
      }
    }
    
    /* Loading animation */
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .loading {
      animation: pulse 1.5s ease-in-out infinite;
    }
    
    /* Smooth transitions for all interactive elements */
    * {
      transition: color 0.3s ease, background-color 0.3s ease, border-color 0.3s ease, opacity 0.3s ease;
    }
    
    /* Focus styles for accessibility */
    button:focus-visible,
    input:focus-visible {
      outline: 2px solid #61dca3;
      outline-offset: 2px;
    }
    
    /* Scroll animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .fade-in-up {
      animation: fadeInUp 0.6s ease-out;
    }
  </style>
</head>
<body>
  <!-- Glitch Background -->
  <div class="glitch-background">
    <canvas id="glitchCanvas" class="glitch-canvas"></canvas>
    <div class="center-vignette"></div>
  </div>
  
  <div class="site-name">üìÅ QuickCompress by Rajveer</div>
  
  <div class="upload-container">
    <!-- Left Panel: Controls -->
    <div class="left-panel">
      <h2 class="upload-title">üñºÔ∏è Image Compression Tool</h2>
      
      <input type="file" id="fileInput" hidden accept="image/*">
      
      <!-- Enhanced Icon Buttons -->
      <div class="icon-btns">
        <button class="icon-btn" onclick="document.getElementById('fileInput').click()" aria-label="Upload Image">
          <span class="icon-btn__back" style="background: linear-gradient(135deg, #4f46e5, #7c3aed)"></span>
          <span class="icon-btn__front">
            <span class="icon-btn__icon">üì§</span>
          </span>
          <span class="icon-btn__label">Upload</span>
        </button>
        
        <button class="icon-btn" onclick="clearAll()" aria-label="Clear All">
          <span class="icon-btn__back" style="background: linear-gradient(135deg, #dc2626, #ea580c)"></span>
          <span class="icon-btn__front">
            <span class="icon-btn__icon">üóëÔ∏è</span>
          </span>
          <span class="icon-btn__label">Clear</span>
        </button>
        
        <a class="icon-btn download-btn" id="downloadLink" aria-label="Download Compressed">
          <span class="icon-btn__back" style="background: linear-gradient(135deg, #059669, #0d9488)"></span>
          <span class="icon-btn__front">
            <span class="icon-btn__icon">üíæ</span>
          </span>
          <span class="icon-btn__label">Download</span>
        </a>
      </div>

      <div class="quality-section">
        <div class="quality-label">
          <span>üéöÔ∏è Compression Quality</span>
          <span class="quality-value" id="qualityValue">80%</span>
        </div>
        <div class="slider-container">
          <input type="range" id="qualitySlider" min="1" max="100" value="80">
        </div>
        <div class="quality-presets">
          <button class="preset-btn" onclick="setQuality(95)">High (95%)</button>
          <button class="preset-btn" onclick="setQuality(80)" class="active">Medium (80%)</button>
          <button class="preset-btn" onclick="setQuality(60)">Low (60%)</button>
          <button class="preset-btn" onclick="setQuality(40)">Web (40%)</button>
        </div>
        
        <!-- File Size Statistics -->
        <div class="file-stats" id="fileStats" style="display: none;">
          <div class="stats-container">
            <div class="stat-item">
              <div class="stat-label">Original Size</div>
              <div class="stat-value" id="originalSizeValue">-</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Compressed Size</div>
              <div class="stat-value" id="compressedSizeValue">-</div>
            </div>

          </div>
          <div class="quality-preview" id="qualityPreview">
            üìä Quality: 80% | Processing...
          </div>
        </div>
      </div>
    </div>
    
    <!-- Right Panel: Drop Area -->
    <div class="right-panel">
      <div class="drop-area" id="dropArea" ondrop="dropHandler(event)" ondragover="dragOverHandler(event)" onclick="document.getElementById('fileInput').click()">
        <div class="drop-area-text" id="dropAreaText">
          <span>üìÅ</span>
          <span>Drag & Drop your image here</span>
        </div>
        <div class="drop-area-subtext" id="dropAreaSubtext">or click to browse files</div>
        <div class="preview" id="previewContainer"></div>
      </div>
    </div>
  </div>

  <div class="description-box">
    <div class="simple-stats">
      <div class="stat-item">
        <span class="stat-number">‚ö°</span>
        <span class="stat-text">Instant Processing</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">üîí</span>
        <span class="stat-text">100% Private</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">üíæ</span>
        <span class="stat-text">Up to 70% Smaller</span>
      </div>
    </div>
    
    <div class="tip-box">
      <span class="tip-icon">üí°</span>
      <span>Start with <strong>80% quality</strong> for the perfect balance</span>
    </div>
  </div>

  <script>
    const fileInput = document.getElementById('fileInput');
    let previewContainer = document.getElementById('previewContainer');
    const qualitySlider = document.getElementById('qualitySlider');
    const qualityValue = document.getElementById('qualityValue');
    const downloadLink = document.getElementById('downloadLink');
    let currentFile = null;
    let currentCompressedUrl = null; // Added for memory management

    // File Input Handler
    fileInput.addEventListener('change', function(e) {
      handleFile(e.target.files[0]);
    });

    // Enhanced drag handlers with better visual feedback
    function dragOverHandler(e) {
      e.preventDefault();
      e.stopPropagation();
      const dropArea = document.getElementById('dropArea');
      dropArea.classList.add('dragover');
    }

    function dropHandler(e) {
      e.preventDefault();
      e.stopPropagation();
      const dropArea = document.getElementById('dropArea');
      dropArea.classList.remove('dragover');
      const file = e.dataTransfer.files[0];
      if (file && file.type.startsWith('image/')) {
        handleFile(file);
      } else {
        showNotification('Please select a valid image file', 'error');
      }
    }

    // Add drag leave handler
    document.getElementById('dropArea').addEventListener('dragleave', function(e) {
      e.preventDefault();
      e.stopPropagation();
      // Only remove dragover if we're actually leaving the drop area
      if (!e.currentTarget.contains(e.relatedTarget)) {
        this.classList.remove('dragover');
      }
    });
    
    // Notification system
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 100px;
        right: 24px;
        background: ${type === 'error' ? 'rgba(220, 38, 38, 0.9)' : 'rgba(97, 220, 163, 0.9)'};
        color: white;
        padding: 16px 24px;
        border-radius: 12px;
        font-weight: 500;
        z-index: 1000;
        backdrop-filter: blur(10px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        transform: translateX(100%);
        transition: transform 0.3s ease;
      `;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      // Animate in
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);
      
      // Remove after 3 seconds
      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 300);
      }, 3000);
    }

    // File Handling with zoom and pan functionality
    function handleFile(file) {
      currentFile = file;
      const reader = new FileReader();
      reader.onload = function(e) {
        // Show file stats in left panel
        const fileStats = document.getElementById('fileStats');
        const originalSizeValue = document.getElementById('originalSizeValue');
        const compressedSizeValue = document.getElementById('compressedSizeValue');

        
        if (fileStats) {
          fileStats.style.display = 'block';
        }
        if (originalSizeValue) {
          originalSizeValue.textContent = formatFileSize(file.size);
        }
        if (compressedSizeValue) {
          compressedSizeValue.innerHTML = '<span style="color: #61b3dc;">‚ö° Processing...</span>';
        }

        
        // Show image in right panel with zoom/pan functionality
        const dropArea = document.getElementById('dropArea');
        dropArea.classList.add('has-image');
        
        // Remove click handler and cursor pointer when image is loaded
        dropArea.onclick = null;
        dropArea.style.cursor = 'default';
        
        // Create zoom container with controls
        dropArea.innerHTML = `
          <div class="preview" id="previewContainer">
            <div class="image-zoom-container" id="imageZoomContainer">
              <img src="${e.target.result}" alt="Preview" id="previewImage" class="zoom-image">
              <div class="zoom-controls">
                <button class="zoom-btn" id="zoomIn" title="Zoom In">+</button>
                <button class="zoom-btn" id="zoomOut" title="Zoom Out">-</button>
                <button class="zoom-reset" id="zoomReset" title="Fit to Container">‚åÇ</button>
              </div>
            </div>
          </div>
        `;
        
        // Re-assign previewContainer reference
        window.previewContainer = document.getElementById('previewContainer');
        
        // Initialize zoom and pan functionality
        const img = document.getElementById('previewImage');
        img.onload = function() {
          initializeZoomPan(img);
        };
        
        compressImage();
      };
      reader.readAsDataURL(file);
    }
    
    // Initialize zoom and pan functionality
    function initializeZoomPan(img) {
      const container = document.getElementById('imageZoomContainer');
      const zoomInBtn = document.getElementById('zoomIn');
      const zoomOutBtn = document.getElementById('zoomOut');
      const zoomResetBtn = document.getElementById('zoomReset');
      
      let scale = 1;
      let translateX = 0;
      let translateY = 0;
      let isDragging = false;
      let lastX = 0;
      let lastY = 0;
      
      // Fit image to container initially
      fitImageToContainer();
      
      function fitImageToContainer() {
        const containerRect = container.getBoundingClientRect();
        const imgNaturalWidth = img.naturalWidth;
        const imgNaturalHeight = img.naturalHeight;
        
        // Calculate scale to fit image in container
        const scaleX = containerRect.width / imgNaturalWidth;
        const scaleY = containerRect.height / imgNaturalHeight;
        scale = Math.min(scaleX, scaleY) * 0.9; // 90% of container for padding
        
        translateX = 0;
        translateY = 0;
        updateTransform();
      }
      
      function updateTransform() {
        img.style.transform = `translate(-50%, -50%) translate(${translateX}px, ${translateY}px) scale(${scale})`;
      }
      
      // Zoom controls
      zoomInBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        scale = Math.min(scale * 1.2, 5); // Max 5x zoom
        updateTransform();
      });
      
      zoomOutBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        scale = Math.max(scale / 1.2, 0.1); // Min 0.1x zoom
        updateTransform();
      });
      
      zoomResetBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        fitImageToContainer();
      });
      
      // Mouse wheel zoom
      container.addEventListener('wheel', (e) => {
        e.preventDefault();
        const delta = e.deltaY > 0 ? 0.9 : 1.1;
        scale = Math.min(Math.max(scale * delta, 0.1), 5);
        updateTransform();
      });
      
      // Mouse drag
      container.addEventListener('mousedown', (e) => {
        if (e.target === img) {
          isDragging = true;
          lastX = e.clientX;
          lastY = e.clientY;
          container.style.cursor = 'grabbing';
          e.preventDefault();
        }
      });
      
      document.addEventListener('mousemove', (e) => {
        if (isDragging) {
          const deltaX = e.clientX - lastX;
          const deltaY = e.clientY - lastY;
          translateX += deltaX;
          translateY += deltaY;
          lastX = e.clientX;
          lastY = e.clientY;
          updateTransform();
        }
      });
      
      document.addEventListener('mouseup', () => {
        if (isDragging) {
          isDragging = false;
          container.style.cursor = 'grab';
        }
      });
      
      // Touch support for mobile
      let initialDistance = 0;
      let initialScale = 1;
      let touches = [];
      
      container.addEventListener('touchstart', (e) => {
        e.preventDefault();
        touches = Array.from(e.touches);
        
        if (touches.length === 1) {
          // Single touch - pan
          isDragging = true;
          lastX = touches[0].clientX;
          lastY = touches[0].clientY;
        } else if (touches.length === 2) {
          // Two touches - zoom
          isDragging = false;
          initialDistance = getDistance(touches[0], touches[1]);
          initialScale = scale;
        }
      });
      
      container.addEventListener('touchmove', (e) => {
        e.preventDefault();
        touches = Array.from(e.touches);
        
        if (touches.length === 1 && isDragging) {
          // Pan
          const deltaX = touches[0].clientX - lastX;
          const deltaY = touches[0].clientY - lastY;
          translateX += deltaX;
          translateY += deltaY;
          lastX = touches[0].clientX;
          lastY = touches[0].clientY;
          updateTransform();
        } else if (touches.length === 2) {
          // Zoom
          const currentDistance = getDistance(touches[0], touches[1]);
          const scaleChange = currentDistance / initialDistance;
          scale = Math.min(Math.max(initialScale * scaleChange, 0.1), 5);
          updateTransform();
        }
      });
      
      container.addEventListener('touchend', (e) => {
        isDragging = false;
        touches = [];
      });
      
      function getDistance(touch1, touch2) {
        return Math.sqrt(
          Math.pow(touch2.clientX - touch1.clientX, 2) +
          Math.pow(touch2.clientY - touch1.clientY, 2)
        );
      }
      
      // Handle window resize
      window.addEventListener('resize', () => {
        fitImageToContainer();
      });
    }
    
    // Enhanced file size formatting
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }
    
    // Quality preset functionality
    function setQuality(value) {
      qualitySlider.value = value;
      qualityValue.textContent = value + '%';
      
      // Update active preset button
      document.querySelectorAll('.preset-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      if(currentFile) compressImage();
    }

    // Enhanced Compression Function with real-time preview and better feedback
    function compressImage() {
      if (!currentFile) return;
      
      // Show processing state in left panel stats
      const compressedSizeValue = document.getElementById('compressedSizeValue');

      const qualityPreviewEl = document.getElementById('qualityPreview');
      
      if (compressedSizeValue) {
        compressedSizeValue.innerHTML = '<span style="color: #61b3dc;">‚ö° Processing...</span>';
      }
      
      const img = new Image();
      img.src = URL.createObjectURL(currentFile);
      
      img.onload = function() {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.drawImage(img, 0, 0);
        
        const quality = qualitySlider.value / 100;
        
        canvas.toBlob(blob => {
          if (currentCompressedUrl) {
            URL.revokeObjectURL(currentCompressedUrl);
          }
          currentCompressedUrl = URL.createObjectURL(blob);
          const downloadBtn = document.getElementById('downloadLink');
          downloadBtn.href = currentCompressedUrl;
          downloadBtn.download = `compressed_${currentFile.name}`;
          downloadBtn.style.display = 'inline-flex';
          downloadBtn.parentElement.style.display = 'inline-flex';
          
          // Update file stats in left panel
          const originalSize = currentFile.size;
          const compressedSize = blob.size;
          const savings = ((originalSize - compressedSize) / originalSize * 100).toFixed(1);
          
          if (compressedSizeValue) {
            compressedSizeValue.innerHTML = formatFileSize(compressedSize);
          }
          

          
          // Update quality preview with real-time information
          if (qualityPreviewEl) {
            const qualityLevel = getQualityDescription(quality * 100);
            qualityPreviewEl.innerHTML = `
              üìä Quality: ${Math.round(quality * 100)}% (${qualityLevel}) | 
              Size: ${formatFileSize(compressedSize)} | 
              üìâ ${savings}% reduction
            `;
          }
          
          // Update preview image with compressed version for visual comparison
          updatePreviewImage(currentCompressedUrl);
          
        }, 'image/jpeg', quality);
      };
    }
    
    // Function to get quality description
    function getQualityDescription(quality) {
      if (quality >= 90) return 'Excellent';
      if (quality >= 80) return 'High';
      if (quality >= 60) return 'Good';
      if (quality >= 40) return 'Medium';
      return 'Low';
    }
    
    // Function to update preview image with compressed version
    function updatePreviewImage(compressedUrl) {
      const previewImg = document.getElementById('previewImage');
      if (previewImg) {
        // Create a new image element to show compressed version
        const compressedImg = new Image();
        compressedImg.onload = function() {
          // Smoothly transition to compressed image
          previewImg.style.opacity = '0.7';
          setTimeout(() => {
            previewImg.src = compressedUrl;
            previewImg.style.opacity = '1';
            // Re-initialize zoom/pan for the new image
            initializeZoomPan(previewImg);
          }, 150);
        };
        compressedImg.src = compressedUrl;
      }
    }

    // Clear Function with proper cleanup
    function clearAll() {
      const downloadBtn = document.getElementById('downloadLink');
      downloadBtn.style.display = 'none';
      downloadBtn.parentElement.style.display = 'none';
      if (currentCompressedUrl) {
        URL.revokeObjectURL(currentCompressedUrl);
        currentCompressedUrl = null;
      }
      fileInput.value = '';
      currentFile = null;
      
      // Hide file stats in left panel
      const fileStats = document.getElementById('fileStats');
      if (fileStats) {
        fileStats.style.display = 'none';
      }
      
      // Reset drop area to show upload component
      const dropArea = document.getElementById('dropArea');
      dropArea.classList.remove('has-image');
      
      // Restore click handler and cursor for upload functionality
      dropArea.onclick = function() {
        document.getElementById('fileInput').click();
      };
      dropArea.style.cursor = 'pointer';
      
      // Restore the original drop area content
      dropArea.innerHTML = `
        <div class="drop-area-text" id="dropAreaText">
          <span>üìÅ</span>
          <span>Drag & Drop your image here</span>
        </div>
        <div class="drop-area-subtext" id="dropAreaSubtext">or click to browse files</div>
        <div class="preview" id="previewContainer"></div>
      `;
      
      // Re-assign previewContainer reference
      window.previewContainer = document.getElementById('previewContainer');
    }

    // Quality Slider Update with real-time preview
    qualitySlider.addEventListener('input', function() {
      qualityValue.textContent = this.value + '%';
      
      // Update quality preview immediately
      const qualityPreviewEl = document.getElementById('qualityPreview');
      if (qualityPreviewEl && currentFile) {
        const qualityLevel = getQualityDescription(parseInt(this.value));
        qualityPreviewEl.innerHTML = `
          üìä Quality: ${this.value}% (${qualityLevel}) | 
          üîÑ Recompressing...
        `;
      }
      
      // Debounce compression for better performance
      clearTimeout(window.compressionTimeout);
      window.compressionTimeout = setTimeout(() => {
        if(currentFile) compressImage();
      }, 300);
    });
    
    // Handle window resize to maintain image fitting
    window.addEventListener('resize', function() {
      const previewImg = document.getElementById('previewImage');
      if (previewImg) {
        fitImageToContainer(previewImg);
      }
    });

    // Letter Glitch Background Implementation
    class LetterGlitch {
      constructor(canvas, options = {}) {
        this.canvas = canvas;
        this.ctx = canvas.getContext('2d');
        this.glitchColors = options.glitchColors || ['#2b4539', '#61dca3', '#61b3dc'];
        this.glitchSpeed = options.glitchSpeed || 50;
        this.smooth = options.smooth !== false;
        this.characters = options.characters || 'ABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$&*()-_+=/[]{};:<>.,0123456789';
        
        this.fontSize = 16;
        this.charWidth = 10;
        this.charHeight = 20;
        this.letters = [];
        this.grid = { columns: 0, rows: 0 };
        this.lastGlitchTime = Date.now();
        this.animationId = null;
        
        this.lettersAndSymbols = Array.from(this.characters);
        
        this.init();
      }
      
      getRandomChar() {
        return this.lettersAndSymbols[Math.floor(Math.random() * this.lettersAndSymbols.length)];
      }
      
      getRandomColor() {
        return this.glitchColors[Math.floor(Math.random() * this.glitchColors.length)];
      }
      
      hexToRgb(hex) {
        const shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
        hex = hex.replace(shorthandRegex, (m, r, g, b) => r + r + g + g + b + b);
        const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        return result ? {
          r: parseInt(result[1], 16),
          g: parseInt(result[2], 16),
          b: parseInt(result[3], 16)
        } : null;
      }
      
      interpolateColor(start, end, factor) {
        const result = {
          r: Math.round(start.r + (end.r - start.r) * factor),
          g: Math.round(start.g + (end.g - start.g) * factor),
          b: Math.round(start.b + (end.b - start.b) * factor)
        };
        return `rgb(${result.r}, ${result.g}, ${result.b})`;
      }
      
      calculateGrid(width, height) {
        const columns = Math.ceil(width / this.charWidth);
        const rows = Math.ceil(height / this.charHeight);
        return { columns, rows };
      }
      
      initializeLetters(columns, rows) {
        this.grid = { columns, rows };
        const totalLetters = columns * rows;
        this.letters = Array.from({ length: totalLetters }, () => ({
          char: this.getRandomChar(),
          color: this.getRandomColor(),
          targetColor: this.getRandomColor(),
          colorProgress: 1
        }));
      }
      
      resizeCanvas() {
        const dpr = window.devicePixelRatio || 1;
        const rect = this.canvas.getBoundingClientRect();
        
        this.canvas.width = window.innerWidth * dpr;
        this.canvas.height = window.innerHeight * dpr;
        
        this.canvas.style.width = `${window.innerWidth}px`;
        this.canvas.style.height = `${window.innerHeight}px`;
        
        this.ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
        
        const { columns, rows } = this.calculateGrid(window.innerWidth, window.innerHeight);
        this.initializeLetters(columns, rows);
        
        this.drawLetters();
      }
      
      drawLetters() {
        if (this.letters.length === 0) return;
        
        this.ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
        this.ctx.font = `${this.fontSize}px monospace`;
        this.ctx.textBaseline = 'top';
        
        this.letters.forEach((letter, index) => {
          const x = (index % this.grid.columns) * this.charWidth;
          const y = Math.floor(index / this.grid.columns) * this.charHeight;
          this.ctx.fillStyle = letter.color;
          this.ctx.fillText(letter.char, x, y);
        });
      }
      
      updateLetters() {
        if (!this.letters || this.letters.length === 0) return;
        
        const updateCount = Math.max(1, Math.floor(this.letters.length * 0.05));
        
        for (let i = 0; i < updateCount; i++) {
          const index = Math.floor(Math.random() * this.letters.length);
          if (!this.letters[index]) continue;
          
          this.letters[index].char = this.getRandomChar();
          this.letters[index].targetColor = this.getRandomColor();
          
          if (!this.smooth) {
            this.letters[index].color = this.letters[index].targetColor;
            this.letters[index].colorProgress = 1;
          } else {
            this.letters[index].colorProgress = 0;
          }
        }
      }
      
      handleSmoothTransitions() {
        let needsRedraw = false;
        this.letters.forEach(letter => {
          if (letter.colorProgress < 1) {
            letter.colorProgress += 0.05;
            if (letter.colorProgress > 1) letter.colorProgress = 1;
            
            const startRgb = this.hexToRgb(letter.color);
            const endRgb = this.hexToRgb(letter.targetColor);
            if (startRgb && endRgb) {
              letter.color = this.interpolateColor(startRgb, endRgb, letter.colorProgress);
              needsRedraw = true;
            }
          }
        });
        
        if (needsRedraw) {
          this.drawLetters();
        }
      }
      
      animate() {
        const now = Date.now();
        if (now - this.lastGlitchTime >= this.glitchSpeed) {
          this.updateLetters();
          this.drawLetters();
          this.lastGlitchTime = now;
        }
        
        if (this.smooth) {
          this.handleSmoothTransitions();
        }
        
        this.animationId = requestAnimationFrame(() => this.animate());
      }
      
      init() {
        this.resizeCanvas();
        this.animate();
        
        let resizeTimeout;
        const handleResize = () => {
          clearTimeout(resizeTimeout);
          resizeTimeout = setTimeout(() => {
            cancelAnimationFrame(this.animationId);
            this.resizeCanvas();
            this.animate();
          }, 100);
        };
        
        window.addEventListener('resize', handleResize);
      }
      
      destroy() {
        if (this.animationId) {
          cancelAnimationFrame(this.animationId);
        }
      }
    }
    
    // Initialize the glitch background when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      try {
        const glitchCanvas = document.getElementById('glitchCanvas');
        if (glitchCanvas) {
          const glitchEffect = new LetterGlitch(glitchCanvas, {
            glitchSpeed: 50,
            smooth: true,
            glitchColors: ['#2b4539', '#61dca3', '#61b3dc']
          });
          console.log('Glitch background initialized successfully');
        } else {
          console.error('Glitch canvas element not found');
        }
      } catch (error) {
        console.error('Error initializing glitch background:', error);
        // Fallback: show a simple black background
        document.body.style.background = '#000000';
      }
    });
  </script>
</body>
</html>
