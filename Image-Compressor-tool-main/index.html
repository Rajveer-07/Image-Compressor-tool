<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QuickCompress - Professional Image Compression Tool</title>
  <meta name="description" content="Professional image compression tool with advanced algorithms. Reduce file sizes while maintaining quality. Fast, secure, and free.">
  <meta name="keywords" content="image compression, optimize images, reduce image size, professional tool, web compression">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E📁%3C/text%3E%3C/svg%3E">
  <style>
    /* Letter Glitch Background */
    .glitch-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: #000000;
      overflow: hidden;
      /* Noise effect instead of blur */
      background-image: 
        radial-gradient(circle at 20% 50%, transparent 20%, rgba(255,255,255,0.3) 21%, rgba(255,255,255,0.3) 34%, transparent 35%, transparent),
        linear-gradient(0deg, rgba(255,255,255,0.1) 50%, transparent 50%);
      background-size: 3px 3px, 2px 2px;
      animation: noise 0.2s infinite;
    }
    
    @keyframes noise {
      0%, 100% { transform: translate(0, 0); }
      10% { transform: translate(-1px, -1px); }
      20% { transform: translate(1px, -1px); }
      30% { transform: translate(-1px, 1px); }
      40% { transform: translate(1px, 1px); }
      50% { transform: translate(-1px, 0); }
      60% { transform: translate(1px, 0); }
      70% { transform: translate(0, -1px); }
      80% { transform: translate(0, 1px); }
      90% { transform: translate(-1px, -1px); }
    }
    
    .glitch-canvas {
      display: block;
      width: 100%;
      height: 100%;
      /* Add noise texture overlay */
      position: relative;
    }
    
    .glitch-canvas::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      background-image: 
        radial-gradient(circle at 25% 25%, rgba(255,255,255,0.1) 1px, transparent 1px),
        radial-gradient(circle at 75% 75%, rgba(0,0,0,0.1) 1px, transparent 1px);
      background-size: 4px 4px, 6px 6px;
      background-position: 0 0, 2px 2px;
      opacity: 0.6;
      animation: staticNoise 0.16s infinite steps(8);
    }
    
    @keyframes staticNoise {
      0% { transform: translateX(0px) translateY(0px); }
      25% { transform: translateX(1px) translateY(-1px); }
      50% { transform: translateX(-1px) translateY(1px); }
      75% { transform: translateX(1px) translateY(1px); }
      100% { transform: translateX(-1px) translateY(-1px); }
    }
    
    .center-vignette {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background: 
        radial-gradient(circle, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.2) 60%, rgba(0,0,0,0) 100%),
        /* Film grain noise overlay */
        repeating-linear-gradient(
          90deg,
          transparent,
          transparent 2px,
          rgba(255,255,255,0.03) 2px,
          rgba(255,255,255,0.03) 4px
        ),
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 2px,
          rgba(0,0,0,0.1) 2px,
          rgba(0,0,0,0.1) 4px
        );
      /* Remove backdrop-filter blur */
      animation: grainNoise 0.1s infinite alternate;
    }
    
    @keyframes grainNoise {
      0% { opacity: 0.8; }
      100% { opacity: 1; }
    }
    body {
      background: #000000; /* Fallback background */
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      position: relative;
      padding: 20px;
      overflow-x: hidden;
      scroll-behavior: smooth;
    }
    
    * {
      box-sizing: border-box;
    }
    
    ::selection {
      background: rgba(97, 220, 163, 0.3);
      color: #ffffff;
    }

    .site-name {
      position: fixed;
      top: 24px;
      left: 24px;
      font-size: 18px;
      font-weight: 600;
      color: #61dca3;
      text-shadow: 0 0 20px rgba(97, 220, 163, 0.6);
      z-index: 1000;
      
      /* Enhanced glass effect */
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(97, 220, 163, 0.4);
      border-radius: 16px;
      padding: 14px 24px;
      box-shadow: 
        0 12px 40px rgba(0, 0, 0, 0.4),
        0 0 30px rgba(97, 220, 163, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        inset 0 -1px 0 rgba(0, 0, 0, 0.2);
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      
      cursor: pointer;
      user-select: none;
      position: relative;
      overflow: hidden;
    }
    
    .site-name::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(97, 220, 163, 0.2), transparent);
      transition: left 0.6s;
    }
    
    .site-name:hover::before {
      left: 100%;
    }
    
    .site-name:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 
        0 16px 50px rgba(0, 0, 0, 0.5),
        0 0 40px rgba(97, 220, 163, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2),
        inset 0 -1px 0 rgba(0, 0, 0, 0.3);
      border-color: rgba(97, 220, 163, 0.6);
      background: rgba(0, 0, 0, 0.9);
      text-shadow: 0 0 25px rgba(97, 220, 163, 0.8);
    }
    
    .upload-container {
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
      border: 1px solid rgba(97, 220, 163, 0.3);
      padding: 48px;
      border-radius: 24px;
      box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.6),
        0 0 40px rgba(97, 220, 163, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      text-align: center;
      width: 90%;
      max-width: 720px;
      margin-top: 120px;
      position: relative;
      z-index: 5;
      transition: all 0.3s ease;
    }
    
    .upload-container:hover {
      transform: translateY(-2px);
      box-shadow: 
        0 25px 70px rgba(0, 0, 0, 0.7),
        0 0 50px rgba(97, 220, 163, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
    }
    
    @media (max-width: 768px) {
      .upload-container {
        padding: 32px 24px;
        margin: 100px 16px 0 16px;
        width: calc(100% - 32px);
      }
      
      .site-name {
        top: 16px;
        left: 16px;
        font-size: 16px;
        padding: 12px 20px;
      }
    }

    .upload-title {
      color: #61dca3;
      margin-bottom: 24px;
      text-shadow: 0 0 20px rgba(97, 220, 163, 0.4);
      font-weight: 600;
      font-size: 1.8rem;
      letter-spacing: -0.01em;
    }

    /* Enhanced Icon Buttons */
    .icon-btns {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin: 32px 0;
      padding: 16px 0;
      overflow: visible;
      flex-wrap: wrap;
    }

    .icon-btn {
      background-color: transparent;
      border: none;
      outline: none;
      position: relative;
      width: 80px;
      height: 80px;
      perspective: 1000px;
      transform-style: preserve-3d;
      -webkit-tap-highlight-color: transparent;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .icon-btn__back,
    .icon-btn__front,
    .icon-btn__label {
      transition:
        opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94),
        transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .icon-btn__back,
    .icon-btn__front {
      border-radius: 20px;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .icon-btn__back {
      box-shadow: 
        0 8px 25px rgba(0, 0, 0, 0.3),
        0 0 20px rgba(97, 220, 163, 0.1);
      display: block;
      transform: rotate(8deg);
      transform-origin: 100% 100%;
      opacity: 0.8;
    }

    .icon-btn__front {
      background: rgba(255, 255, 255, 0.12);
      box-shadow: 
        0 0 0 1px rgba(255, 255, 255, 0.2) inset,
        0 4px 20px rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      display: flex;
      transform-origin: 50% 50%;
      border: 1px solid rgba(97, 220, 163, 0.3);
    }

    .icon-btn__icon {
      margin: auto;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: white;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }

    .icon-btn__label {
      font-size: 14px;
      font-weight: 500;
      white-space: nowrap;
      text-align: center;
      line-height: 1.2;
      color: #61dca3;
      opacity: 0;
      position: absolute;
      top: 100%;
      right: 0;
      left: 0;
      transform: translateY(8px);
      margin-top: 12px;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
    }

    .icon-btn:focus-visible .icon-btn__back,
    .icon-btn:hover .icon-btn__back {
      transform: rotate(15deg) translate3d(-8px, -8px, 12px);
      opacity: 1;
      box-shadow: 
        0 12px 35px rgba(0, 0, 0, 0.4),
        0 0 30px rgba(97, 220, 163, 0.2);
    }

    .icon-btn:focus-visible .icon-btn__front,
    .icon-btn:hover .icon-btn__front {
      transform: translateZ(20px) scale(1.05);
      background: rgba(255, 255, 255, 0.18);
      border-color: rgba(97, 220, 163, 0.5);
      box-shadow: 
        0 0 0 1px rgba(255, 255, 255, 0.3) inset,
        0 8px 30px rgba(0, 0, 0, 0.3),
        0 0 20px rgba(97, 220, 163, 0.3);
    }

    .icon-btn:focus-visible .icon-btn__label,
    .icon-btn:hover .icon-btn__label {
      opacity: 1;
      transform: translateY(0);
      color: #ffffff;
    }

    .download-btn {
      display: none;
    }
    
    .icon-btn:active {
      transform: scale(0.95);
    }

    .drop-area {
      border: 2px dashed rgba(97, 220, 163, 0.4);
      border-radius: 20px;
      padding: 48px 32px;
      margin: 32px 0;
      color: rgba(255, 255, 255, 0.8);
      background: rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      min-height: 200px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
    
    .drop-area::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(97, 220, 163, 0.1), rgba(97, 179, 220, 0.1));
      opacity: 0;
      transition: opacity 0.4s ease;
      pointer-events: none;
    }
    
    .drop-area:hover::before {
      opacity: 1;
    }
    
    .drop-area:hover {
      border-color: rgba(97, 220, 163, 0.7);
      box-shadow: 
        0 0 30px rgba(97, 220, 163, 0.2),
        inset 0 0 20px rgba(97, 220, 163, 0.05);
      color: #ffffff;
      transform: translateY(-2px);
    }
    
    .drop-area.dragover {
      border-color: rgba(97, 220, 163, 1);
      background: rgba(97, 220, 163, 0.1);
      box-shadow: 
        0 0 40px rgba(97, 220, 163, 0.4),
        inset 0 0 30px rgba(97, 220, 163, 0.1);
      transform: scale(1.02);
    }
    
    .drop-area-text {
      font-size: 1.2rem;
      font-weight: 500;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .drop-area-subtext {
      font-size: 0.95rem;
      opacity: 0.7;
      margin-bottom: 24px;
    }
    
    @media (max-width: 768px) {
      .drop-area {
        padding: 32px 24px;
        min-height: 160px;
      }
      
      .drop-area-text {
        font-size: 1.1rem;
      }
    }

    .preview {
      margin-top: 24px;
    }
    
    .preview img {
      max-width: 100%;
      height: auto;
      border: 1px solid rgba(97, 220, 163, 0.3);
      border-radius: 16px;
      margin: 16px 0;
      box-shadow: 
        0 8px 25px rgba(0, 0, 0, 0.4),
        0 0 20px rgba(97, 220, 163, 0.1);
      transition: all 0.3s ease;
    }
    
    .preview img:hover {
      transform: scale(1.02);
      box-shadow: 
        0 12px 35px rgba(0, 0, 0, 0.5),
        0 0 30px rgba(97, 220, 163, 0.2);
    }
    
    .preview-stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-top: 20px;
    }
    
    .stat-card {
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(97, 220, 163, 0.2);
      border-radius: 12px;
      padding: 16px;
      text-align: center;
    }
    
    .stat-label {
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 4px;
      font-weight: 500;
    }
    
    .stat-value {
      font-size: 1.2rem;
      color: #61dca3;
      font-weight: 600;
      font-family: 'JetBrains Mono', monospace;
    }
    
    @media (max-width: 480px) {
      .preview-stats {
        grid-template-columns: 1fr;
        gap: 12px;
      }
    }

    .quality-section {
      margin: 32px 0;
      padding: 24px;
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border: 1px solid rgba(97, 220, 163, 0.2);
      border-radius: 16px;
      box-shadow: 
        0 4px 15px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }
    
    .quality-label {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
      color: #ffffff;
      font-weight: 500;
      font-size: 1.1rem;
    }
    
    .quality-value {
      color: #61dca3;
      font-family: 'JetBrains Mono', monospace;
      font-weight: 600;
      font-size: 1.2rem;
    }
    
    .slider-container {
      position: relative;
      width: 100%;
    }
    
    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      outline: none;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, #61dca3, #61b3dc);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 
        0 4px 12px rgba(97, 220, 163, 0.4),
        0 0 20px rgba(97, 220, 163, 0.2);
      transition: all 0.3s ease;
    }
    
    input[type="range"]::-webkit-slider-thumb:hover {
      transform: scale(1.2);
      box-shadow: 
        0 6px 20px rgba(97, 220, 163, 0.6),
        0 0 30px rgba(97, 220, 163, 0.4);
    }
    
    input[type="range"]::-moz-range-thumb {
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, #61dca3, #61b3dc);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 
        0 4px 12px rgba(97, 220, 163, 0.4),
        0 0 20px rgba(97, 220, 163, 0.2);
      transition: all 0.3s ease;
    }
    
    .quality-presets {
      display: flex;
      gap: 8px;
      margin-top: 16px;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    .preset-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(97, 220, 163, 0.3);
      color: rgba(255, 255, 255, 0.8);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    
    .preset-btn:hover,
    .preset-btn.active {
      background: rgba(97, 220, 163, 0.2);
      border-color: rgba(97, 220, 163, 0.6);
      color: #ffffff;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(97, 220, 163, 0.3);
    }

    .description-box {
      text-align: center;
      max-width: 500px;
      margin: 48px auto;
      padding: 24px;
      color: rgba(255, 255, 255, 0.9);
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(97, 220, 163, 0.3);
      border-radius: 16px;
      box-shadow: 
        0 8px 30px rgba(0, 0, 0, 0.6),
        0 0 25px rgba(97, 220, 163, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      position: relative;
      z-index: 5;
    }
    
    .simple-stats {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin-bottom: 24px;
      flex-wrap: wrap;
      gap: 16px;
    }
    
    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      flex: 1;
      min-width: 120px;
    }
    
    .stat-number {
      font-size: 2rem;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }
    
    .stat-text {
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.8);
      font-weight: 500;
      text-align: center;
    }
    
    .tip-box {
      background: linear-gradient(135deg, rgba(97, 220, 163, 0.15), rgba(97, 179, 220, 0.15));
      border: 1px solid rgba(97, 220, 163, 0.4);
      padding: 16px;
      border-radius: 12px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 0.95rem;
    }
    
    .tip-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, #61dca3, #61b3dc);
    }
    
    .tip-icon {
      font-size: 1.1rem;
    }
    
    @media (max-width: 480px) {
      .simple-stats {
        flex-direction: column;
        gap: 20px;
      }
      
      .stat-item {
        min-width: auto;
      }
      
      .description-box {
        margin: 32px 16px;
        padding: 20px;
      }
    }
    
    /* Loading animation */
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .loading {
      animation: pulse 1.5s ease-in-out infinite;
    }
    
    /* Smooth transitions for all interactive elements */
    * {
      transition: color 0.3s ease, background-color 0.3s ease, border-color 0.3s ease, opacity 0.3s ease;
    }
    
    /* Focus styles for accessibility */
    button:focus-visible,
    input:focus-visible {
      outline: 2px solid #61dca3;
      outline-offset: 2px;
    }
    
    /* Scroll animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .fade-in-up {
      animation: fadeInUp 0.6s ease-out;
    }
  </style>
</head>
<body>
  <!-- Glitch Background -->
  <div class="glitch-background">
    <canvas id="glitchCanvas" class="glitch-canvas"></canvas>
    <div class="center-vignette"></div>
  </div>
  
  <div class="site-name">📁 QuickCompress by Rajveer</div>
  
  <div class="upload-container">
    <h2 class="upload-title">🖼️ Image Compression Tool</h2>
    
    <input type="file" id="fileInput" hidden accept="image/*">
    
    <!-- Enhanced Icon Buttons -->
    <div class="icon-btns">
      <button class="icon-btn" onclick="document.getElementById('fileInput').click()" aria-label="Upload Image">
        <span class="icon-btn__back" style="background: linear-gradient(135deg, #4f46e5, #7c3aed)"></span>
        <span class="icon-btn__front">
          <span class="icon-btn__icon">📤</span>
        </span>
        <span class="icon-btn__label">Upload</span>
      </button>
      
      <button class="icon-btn" onclick="clearAll()" aria-label="Clear All">
        <span class="icon-btn__back" style="background: linear-gradient(135deg, #dc2626, #ea580c)"></span>
        <span class="icon-btn__front">
          <span class="icon-btn__icon">🗑️</span>
        </span>
        <span class="icon-btn__label">Clear</span>
      </button>
      
      <a class="icon-btn download-btn" id="downloadLink" aria-label="Download Compressed">
        <span class="icon-btn__back" style="background: linear-gradient(135deg, #059669, #0d9488)"></span>
        <span class="icon-btn__front">
          <span class="icon-btn__icon">💾</span>
        </span>
        <span class="icon-btn__label">Download</span>
      </a>
    </div>
    
    <div class="drop-area" id="dropArea" ondrop="dropHandler(event)" ondragover="dragOverHandler(event)" onclick="document.getElementById('fileInput').click()">
      <div class="drop-area-text">
        <span>📁</span>
        <span>Drag & Drop your image here</span>
      </div>
      <div class="drop-area-subtext">or click to browse files</div>
      <div class="preview" id="previewContainer"></div>
    </div>

    <div class="quality-section">
      <div class="quality-label">
        <span>🎚️ Compression Quality</span>
        <span class="quality-value" id="qualityValue">80%</span>
      </div>
      <div class="slider-container">
        <input type="range" id="qualitySlider" min="1" max="100" value="80">
      </div>
      <div class="quality-presets">
        <button class="preset-btn" onclick="setQuality(95)">High (95%)</button>
        <button class="preset-btn" onclick="setQuality(80)" class="active">Medium (80%)</button>
        <button class="preset-btn" onclick="setQuality(60)">Low (60%)</button>
        <button class="preset-btn" onclick="setQuality(40)">Web (40%)</button>
      </div>
    </div>
  </div>

  <div class="description-box">
    <div class="simple-stats">
      <div class="stat-item">
        <span class="stat-number">⚡</span>
        <span class="stat-text">Instant Processing</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">🔒</span>
        <span class="stat-text">100% Private</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">💾</span>
        <span class="stat-text">Up to 70% Smaller</span>
      </div>
    </div>
    
    <div class="tip-box">
      <span class="tip-icon">💡</span>
      <span>Start with <strong>80% quality</strong> for the perfect balance</span>
    </div>
  </div>

  <script>
    const fileInput = document.getElementById('fileInput');
    const previewContainer = document.getElementById('previewContainer');
    const qualitySlider = document.getElementById('qualitySlider');
    const qualityValue = document.getElementById('qualityValue');
    const downloadLink = document.getElementById('downloadLink');
    let currentFile = null;
    let currentCompressedUrl = null; // Added for memory management

    // File Input Handler
    fileInput.addEventListener('change', function(e) {
      handleFile(e.target.files[0]);
    });

    // Enhanced drag handlers with better visual feedback
    function dragOverHandler(e) {
      e.preventDefault();
      e.stopPropagation();
      const dropArea = document.getElementById('dropArea');
      dropArea.classList.add('dragover');
    }

    function dropHandler(e) {
      e.preventDefault();
      e.stopPropagation();
      const dropArea = document.getElementById('dropArea');
      dropArea.classList.remove('dragover');
      const file = e.dataTransfer.files[0];
      if (file && file.type.startsWith('image/')) {
        handleFile(file);
      } else {
        showNotification('Please select a valid image file', 'error');
      }
    }

    // Add drag leave handler
    document.getElementById('dropArea').addEventListener('dragleave', function(e) {
      e.preventDefault();
      e.stopPropagation();
      // Only remove dragover if we're actually leaving the drop area
      if (!e.currentTarget.contains(e.relatedTarget)) {
        this.classList.remove('dragover');
      }
    });
    
    // Notification system
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 100px;
        right: 24px;
        background: ${type === 'error' ? 'rgba(220, 38, 38, 0.9)' : 'rgba(97, 220, 163, 0.9)'};
        color: white;
        padding: 16px 24px;
        border-radius: 12px;
        font-weight: 500;
        z-index: 1000;
        backdrop-filter: blur(10px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        transform: translateX(100%);
        transition: transform 0.3s ease;
      `;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      // Animate in
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);
      
      // Remove after 3 seconds
      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 300);
      }, 3000);
    }

    // File Handling with enhanced UI feedback
    function handleFile(file) {
      currentFile = file;
      const reader = new FileReader();
      reader.onload = function(e) {
        previewContainer.innerHTML = `
          <img src="${e.target.result}" alt="Preview">
          <div class="preview-stats">
            <div class="stat-card">
              <div class="stat-label">Original Size</div>
              <div class="stat-value">${formatFileSize(file.size)}</div>
            </div>
            <div class="stat-card" id="compressedSizeCard">
              <div class="stat-label">Compressed Size</div>
              <div class="stat-value" id="compressedSize">Processing...</div>
            </div>
          </div>
        `;
        compressImage();
      };
      reader.readAsDataURL(file);
    }
    
    // Enhanced file size formatting
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }
    
    // Quality preset functionality
    function setQuality(value) {
      qualitySlider.value = value;
      qualityValue.textContent = value + '%';
      
      // Update active preset button
      document.querySelectorAll('.preset-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      if(currentFile) compressImage();
    }

    // Enhanced Compression Function with better feedback
    function compressImage() {
      if (!currentFile) return;
      
      // Show processing state
      const compressedSizeEl = document.getElementById('compressedSize');
      if (compressedSizeEl) {
        compressedSizeEl.innerHTML = '<span style="color: #61b3dc;">⚡ Processing...</span>';
      }
      
      const img = new Image();
      img.src = URL.createObjectURL(currentFile);
      
      img.onload = function() {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.drawImage(img, 0, 0);
        
        canvas.toBlob(blob => {
          if (currentCompressedUrl) {
            URL.revokeObjectURL(currentCompressedUrl);
          }
          currentCompressedUrl = URL.createObjectURL(blob);
          const downloadBtn = document.getElementById('downloadLink');
          downloadBtn.href = currentCompressedUrl;
          downloadBtn.download = `compressed_${currentFile.name}`;
          downloadBtn.style.display = 'inline-flex';
          downloadBtn.parentElement.style.display = 'inline-flex';
          
          // Update compressed size with savings calculation
          const originalSize = currentFile.size;
          const compressedSize = blob.size;
          const savings = ((originalSize - compressedSize) / originalSize * 100).toFixed(1);
          
          if (compressedSizeEl) {
            compressedSizeEl.innerHTML = formatFileSize(compressedSize);
            
            // Add savings indicator
            const savingsEl = document.createElement('div');
            savingsEl.style.cssText = `
              font-size: 0.8rem;
              color: #61dca3;
              margin-top: 4px;
              font-weight: 500;
            `;
            savingsEl.textContent = `${savings}% smaller`;
            
            const compressedCard = document.getElementById('compressedSizeCard');
            if (compressedCard && !compressedCard.querySelector('.savings-indicator')) {
              savingsEl.classList.add('savings-indicator');
              compressedCard.appendChild(savingsEl);
            }
          }
        }, 'image/jpeg', qualitySlider.value/100);
      };
    }

    // Clear Function
    function clearAll() {
      previewContainer.innerHTML = '';
      const downloadBtn = document.getElementById('downloadLink');
      downloadBtn.style.display = 'none';
      downloadBtn.parentElement.style.display = 'none';  // Hide the button container
      if (currentCompressedUrl) {
        URL.revokeObjectURL(currentCompressedUrl);
        currentCompressedUrl = null;
      }
      fileInput.value = '';
      currentFile = null;
    }

    // Quality Slider Update
    qualitySlider.addEventListener('input', function() {
      qualityValue.textContent = this.value;
      if(currentFile) compressImage();
    });

    // Letter Glitch Background Implementation
    class LetterGlitch {
      constructor(canvas, options = {}) {
        this.canvas = canvas;
        this.ctx = canvas.getContext('2d');
        this.glitchColors = options.glitchColors || ['#2b4539', '#61dca3', '#61b3dc'];
        this.glitchSpeed = options.glitchSpeed || 50;
        this.smooth = options.smooth !== false;
        this.characters = options.characters || 'ABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$&*()-_+=/[]{};:<>.,0123456789';
        
        this.fontSize = 16;
        this.charWidth = 10;
        this.charHeight = 20;
        this.letters = [];
        this.grid = { columns: 0, rows: 0 };
        this.lastGlitchTime = Date.now();
        this.animationId = null;
        
        this.lettersAndSymbols = Array.from(this.characters);
        
        this.init();
      }
      
      getRandomChar() {
        return this.lettersAndSymbols[Math.floor(Math.random() * this.lettersAndSymbols.length)];
      }
      
      getRandomColor() {
        return this.glitchColors[Math.floor(Math.random() * this.glitchColors.length)];
      }
      
      hexToRgb(hex) {
        const shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
        hex = hex.replace(shorthandRegex, (m, r, g, b) => r + r + g + g + b + b);
        const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        return result ? {
          r: parseInt(result[1], 16),
          g: parseInt(result[2], 16),
          b: parseInt(result[3], 16)
        } : null;
      }
      
      interpolateColor(start, end, factor) {
        const result = {
          r: Math.round(start.r + (end.r - start.r) * factor),
          g: Math.round(start.g + (end.g - start.g) * factor),
          b: Math.round(start.b + (end.b - start.b) * factor)
        };
        return `rgb(${result.r}, ${result.g}, ${result.b})`;
      }
      
      calculateGrid(width, height) {
        const columns = Math.ceil(width / this.charWidth);
        const rows = Math.ceil(height / this.charHeight);
        return { columns, rows };
      }
      
      initializeLetters(columns, rows) {
        this.grid = { columns, rows };
        const totalLetters = columns * rows;
        this.letters = Array.from({ length: totalLetters }, () => ({
          char: this.getRandomChar(),
          color: this.getRandomColor(),
          targetColor: this.getRandomColor(),
          colorProgress: 1
        }));
      }
      
      resizeCanvas() {
        const dpr = window.devicePixelRatio || 1;
        const rect = this.canvas.getBoundingClientRect();
        
        this.canvas.width = window.innerWidth * dpr;
        this.canvas.height = window.innerHeight * dpr;
        
        this.canvas.style.width = `${window.innerWidth}px`;
        this.canvas.style.height = `${window.innerHeight}px`;
        
        this.ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
        
        const { columns, rows } = this.calculateGrid(window.innerWidth, window.innerHeight);
        this.initializeLetters(columns, rows);
        
        this.drawLetters();
      }
      
      drawLetters() {
        if (this.letters.length === 0) return;
        
        this.ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
        this.ctx.font = `${this.fontSize}px monospace`;
        this.ctx.textBaseline = 'top';
        
        this.letters.forEach((letter, index) => {
          const x = (index % this.grid.columns) * this.charWidth;
          const y = Math.floor(index / this.grid.columns) * this.charHeight;
          this.ctx.fillStyle = letter.color;
          this.ctx.fillText(letter.char, x, y);
        });
      }
      
      updateLetters() {
        if (!this.letters || this.letters.length === 0) return;
        
        const updateCount = Math.max(1, Math.floor(this.letters.length * 0.05));
        
        for (let i = 0; i < updateCount; i++) {
          const index = Math.floor(Math.random() * this.letters.length);
          if (!this.letters[index]) continue;
          
          this.letters[index].char = this.getRandomChar();
          this.letters[index].targetColor = this.getRandomColor();
          
          if (!this.smooth) {
            this.letters[index].color = this.letters[index].targetColor;
            this.letters[index].colorProgress = 1;
          } else {
            this.letters[index].colorProgress = 0;
          }
        }
      }
      
      handleSmoothTransitions() {
        let needsRedraw = false;
        this.letters.forEach(letter => {
          if (letter.colorProgress < 1) {
            letter.colorProgress += 0.05;
            if (letter.colorProgress > 1) letter.colorProgress = 1;
            
            const startRgb = this.hexToRgb(letter.color);
            const endRgb = this.hexToRgb(letter.targetColor);
            if (startRgb && endRgb) {
              letter.color = this.interpolateColor(startRgb, endRgb, letter.colorProgress);
              needsRedraw = true;
            }
          }
        });
        
        if (needsRedraw) {
          this.drawLetters();
        }
      }
      
      animate() {
        const now = Date.now();
        if (now - this.lastGlitchTime >= this.glitchSpeed) {
          this.updateLetters();
          this.drawLetters();
          this.lastGlitchTime = now;
        }
        
        if (this.smooth) {
          this.handleSmoothTransitions();
        }
        
        this.animationId = requestAnimationFrame(() => this.animate());
      }
      
      init() {
        this.resizeCanvas();
        this.animate();
        
        let resizeTimeout;
        const handleResize = () => {
          clearTimeout(resizeTimeout);
          resizeTimeout = setTimeout(() => {
            cancelAnimationFrame(this.animationId);
            this.resizeCanvas();
            this.animate();
          }, 100);
        };
        
        window.addEventListener('resize', handleResize);
      }
      
      destroy() {
        if (this.animationId) {
          cancelAnimationFrame(this.animationId);
        }
      }
    }
    
    // Initialize the glitch background when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      try {
        const glitchCanvas = document.getElementById('glitchCanvas');
        if (glitchCanvas) {
          const glitchEffect = new LetterGlitch(glitchCanvas, {
            glitchSpeed: 50,
            smooth: true,
            glitchColors: ['#2b4539', '#61dca3', '#61b3dc']
          });
          console.log('Glitch background initialized successfully');
        } else {
          console.error('Glitch canvas element not found');
        }
      } catch (error) {
        console.error('Error initializing glitch background:', error);
        // Fallback: show a simple black background
        document.body.style.background = '#000000';
      }
    });
  </script>
</body>
</html>
